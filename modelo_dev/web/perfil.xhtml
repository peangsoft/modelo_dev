<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">


    <f:event listener="#{requisicaoCDI.listar_requisicao(login.idlocal)}"  type="preRenderView"/>

    <header class="page-header">

        <div class="content container">
            <nav class="navbar navbar-inverse" style="background-color: #009fdf">
                <div class="container-fluid">                
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="index_adm.xhtml">Home</a></li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Stock
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li>    
                                    <a href="novoProduto.xhtml" title="Adicionar um determinado produto(novo) no stock">
                                        <img src="img/database-add-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Adicionar produto
                                    </a>
                                </li>
                                <li><a href="produtos.xhtml" title="Ver/Editar todos os produtos existentes em stock">
                                        <img src="img/database-arrow-right-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Visualizar/Editar(#{produtoCDI.Quantidade_produto(login.local)})
                                    </a>
                                </li>
                                <li>
                                    <a href="pedidos.xhtml" title="Ver e aprovar os pedidos de materiais pelos funcionários">
                                        <img src="img/database-arrow-down-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Pedidos(#{requisicaoCDI.requisicaes.size()})
                                    </a>
                                </li> 
                                <li>
                                    <a href="entregas.xhtml" title="Ver entregas/saidas de matériais">
                                        <img src="img/database-check-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Entregas(#{requisicaoCDI.requisicaes1.size()})
                                    </a>
                                </li> 
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Artigos e categorias
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li> 
                                    <a href="novaCategoria.xhtml" title="Adicionar uma nova categoria na Base de dados">
                                        <img src="img/add-to-database-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Novos artigos
                                    </a>
                                </li>
                                <li>
                                    <a href="categorias.xhtml" title="Ver categorias existentes na Base de dados">
                                        <img src="img/database-next-icon.png" width="24" height="24" alt="database-add-icon"/>
                                        Visualizar/Editar/Eliminar
                                    </a>
                                </li>                               
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Relatórios
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li> 
                                    <a href="report_estoque.xhtml" title="Relatório do stock">
                                        <img src="img/Stocks-icon.png" width="24" height="24" />
                                        Estoque
                                    </a>
                                </li>
                                <li>
                                    <a href="report_requisicao.xhtml" title="Relatório de requisições">
                                        <img src="img/report-icon.png" width="24" height="24" />
                                        Requisição
                                    </a>
                                </li>  
                                <li>
                                    <a href="report_departamentos.xhtml" title="Relatório de Departamentos">
                                        <img src="img/Business-Department-icon.png" width="24" height="24" />
                                        Departamentos
                                    </a>
                                </li>                               

                                <li>
                                    <a href="report_entregas.xhtml" title="Fazer requisição para outro utente">
                                        <img src="img/Sales-report-icon.png" width="24" height="24" />
                                        Entregas
                                    </a>
                                </li>                               
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Outros
                                <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li> 
                                    <a href="pessoaNova.xhtml" title="Fazer requisição para outro utente">
                                        <img src="img/Add-Folder-icon.png" width="24" height="24" />
                                        Requisitar por outra pessoa
                                    </a>
                                </li>
                                <li>
                                    <a href="sugestao_adm.xhtml" title="Ler ou responder à sugestões de novos artigos para adicionar no estoque!" >
                                        <img src="img/help-desk-icon.png" width="24" height="24" />
                                        Ler/Responder sugestões(#{sugestaoCDI.sugestaos.size()})
                                    </a>
                                </li>                               
                            </ul>
                        </li>          
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="carrinho_adm.xhtml">
                                Carrinho
                                (#{requisitandoCDI.qtd_carrinho()})

                            </a>
                        </li>

                        <li><a href="perfileditar_adm.xhtml?user=#{login.email}">
                                <span class="glyphicon glyphicon-user"></span>
                                #{login.user.toUpperCase()} (#{login.local})
                            </a>
                        </li>
                        <li>
                            <a href="login.xhtml" title="Sair da aplicação" target="_blank" onclick = "window.location = 'https://www.google.com/accounts/Logout'; startLogoutPolling();return false;" >
                                <span class="glyphicon glyphicon-log-in"></span> 
                                Sair
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>

    </header>

    <script>

        function startLogoutPolling() {
            console.log("startLogoutPolling");
            loggedIn = false;
            alert("Sessão terminada com sucesso!");

            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });



        }
    </script>
</ui:composition>       